# StockAI 기간 설정 최적화 분석

## 1. 현재 상황 분석

### 현재 기간 설정:
- **DART 공시**: 90일 (3개월)
- **뉴스**: 7일 (1주일) 
- **소셜**: 기본 30일
- **재무데이터**: 분기별

### 문제점:
1. **시간대 불일치**: 각 데이터 소스의 기간이 달라 상관관계 분석 어려움
2. **최신성 vs 충분성**: 너무 짧으면 데이터 부족, 너무 길면 최신성 저하
3. **시장 변동성**: 급변하는 시장에서 오래된 데이터의 가중치 문제

## 2. 투자 시나리오별 최적 기간

### A. 단기 투자 (데이팅 트레이딩)
- **목적**: 1일~1주 내 매매 결정
- **추천 기간**:
  - 뉴스: 3일
  - 공시: 14일 (2주)
  - 소셜: 7일
  - 가중치: 뉴스(1.5) > 소셜(1.2) > 공시(0.8)

### B. 단기 투자 (스윙 트레이딩) 
- **목적**: 1주~1개월 내 매매 결정
- **추천 기간**:
  - 뉴스: 14일 (2주)
  - 공시: 30일 (1개월)
  - 소셜: 14일
  - 가중치: 공시(1.5) > 뉴스(1.2) > 소셜(1.0)

### C. 중장기 투자 (포지션)
- **목적**: 1개월~6개월 보유
- **추천 기간**:
  - 뉴스: 30일 (1개월)
  - 공시: 90일 (3개월)
  - 소셜: 30일
  - 가중치: 공시(1.8) > 뉴스(1.0) > 소셜(0.6)

## 3. 데이터별 특성 고려

### 뉴스 데이터:
- **특성**: 빠른 전파, 단기 영향
- **최적 기간**: 7-14일
- **이유**: 뉴스 영향은 보통 2주 내에 주가에 반영됨

### 공시 데이터:
- **특성**: 공식적, 중장기 영향
- **최적 기간**: 30-60일
- **이유**: 공시는 분기별로 나오므로 최소 1개월은 봐야 함

### 소셜 데이터:
- **특성**: 실시간성, 노이즈 많음
- **최적 기간**: 3-7일
- **이유**: 소셜 트렌드는 빠르게 변화하므로 짧은 기간이 적합

## 4. 동적 기간 조정 전략

### 시장 상황별 조정:
```python
def get_optimal_periods(volatility_index, market_trend):
    if volatility_index > 0.3:  # 고변동성
        return {
            'news': 3,      # 짧게
            'disclosure': 14,
            'social': 3
        }
    elif market_trend == 'bull':  # 상승장
        return {
            'news': 7,
            'disclosure': 30,
            'social': 7
        }
    else:  # 일반적 상황
        return {
            'news': 14,
            'disclosure': 45,
            'social': 10
        }
```

## 5. 구현 권장사항

### Phase 1: 통합 기간 설정
- 모든 데이터 소스: **30일 통일**
- 장점: 일관성, 비교 가능성
- 단점: 각 데이터의 특성 무시

### Phase 2: 차별화된 기간 (권장)
- 뉴스: 14일
- 공시: 45일  
- 소셜: 7일
- 재무: 90일 (분기별 특성상)

### Phase 3: 동적 기간 조정
- 시장 변동성에 따른 자동 조정
- 사용자 투자성향별 커스터마이징
- ML 기반 최적 기간 학습

## 6. 가중치 시간 감쇠

```python
def time_decay_weight(days_ago, max_days, decay_rate=0.1):
    """시간이 지날수록 가중치 감소"""
    return math.exp(-decay_rate * days_ago / max_days)
```

- 최신 데이터일수록 높은 가중치
- exponential decay 적용
- 데이터 타입별 다른 감쇠율

## 7. 측정 지표

### 성능 측정:
- **정확도**: 예측 vs 실제 주가 움직임
- **적시성**: 중요 이벤트 감지 속도
- **신뢰도**: 일관된 분석 결과 제공

### A/B 테스트:
- 현재 설정 vs 최적화된 설정
- 다양한 종목군에서 검증
- 투자 성향별 효과 분석